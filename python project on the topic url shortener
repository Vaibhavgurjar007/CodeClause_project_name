import string
import random
from urllib.parse import urlparse

class URLShortener:
    def __init__(self):
        self.url_mapping = {}
        self.allowed_chars = string.ascii_letters + string.digits
        self.base_url = 'https://example.com/'

    def shorten_url(self, long_url):
        parsed_url = urlparse(long_url)
        if parsed_url.scheme == '':
            long_url = 'http://' + long_url

        if long_url in self.url_mapping:
            return self.url_mapping[long_url]

        short_code = self.generate_short_code()
        short_url = self.base_url + short_code
        self.url_mapping[long_url] = short_url
        return short_url

    def generate_short_code(self):
        while True:
            short_code = ''.join(random.choice(self.allowed_chars) for _ in range(6))
            if short_code not in self.url_mapping.values():
                return short_code

# Usage example
url_shortener = URLShortener()
long_url = 'https://www.example.com/very/long/url'
short_url = url_shortener.shorten_url(long_url)
print(f'Short URL: {short_url}')
